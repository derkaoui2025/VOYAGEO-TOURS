<!-- AOS Animation Overflow Fix -->
<style>
    /* Fix for horizontal overflow with AOS animations */
    html, body {
        overflow-x: hidden !important;
        width: 100%;
        position: relative;
    }
    
    /* Additional fixes for AOS animations that might cause overflow */
    [data-aos] {
        overflow: hidden; /* Ensure animated elements don't create overflow */
        pointer-events: none; /* Prevent interaction issues during animation */
    }
    
    [data-aos].aos-animate {
        pointer-events: auto; /* Restore interaction after animation completes */
    }
    
    /* Fix for transform-based animations */
    [data-aos^="fade"][data-aos^="fade"] {
        transform-origin: center center;
        will-change: transform, opacity;
    }
    
    /* Fix for mobile viewport width calculation issues */
    @media screen and (max-width: 768px) {
        .aos-init[data-aos][data-aos][data-aos-delay] {
            transition-delay: 0s !important; /* Remove delays on mobile for better performance */
        }
    }
</style>

<!-- Navbar -->
<nav class="fixed top-0 left-0 w-full z-50 transition-transform duration-300">
    <div class="bg-charcoal/90 backdrop-blur-md shadow-md">
        <div class="container mx-auto px-6 md:px-12 flex justify-between items-center py-3">
            <div class="h-10">
                <a href="/" class="flex items-center">
                    <img src="/images/logo-voyageo-white.webp" alt="Voyageo Tours Logo" class="h-8 w-auto">
                </a>
            </div>
            
            <div id="mobile-toggle" class="md:hidden cursor-pointer z-50 w-10 h-10 flex flex-col justify-center items-center">
                <div class="w-6 h-0.5 bg-white mb-1.5 transition-all"></div>
                <div class="w-6 h-0.5 bg-white mb-1.5 transition-all"></div>
                <div class="w-6 h-0.5 bg-white transition-all"></div>
            </div>
            
            <ul id="navbar-menu" class="hidden md:flex items-center space-x-8 text-white">
                <li><a href="/" class="py-2 hover:text-primary transition-colors text-sm uppercase tracking-wider font-medium">Home</a></li>
                
                <!-- Explore Dropdown -->
                <li class="relative dropdown-container">
                    <a href="#" class="py-2 flex items-center hover:text-primary transition-colors text-sm uppercase tracking-wider font-medium dropdown-toggle">
                        Explore 
                        <i class="fas fa-chevron-down ml-1 text-xs transition-transform"></i>
                    </a>
                    <ul class="absolute left-1/2 -translate-x-1/2 mt-2 w-64 bg-white text-secondary rounded-none border-t-2 border-primary shadow-large py-2 hidden dropdown-menu">
                        <li><a href="/tours" class="block px-6 py-2 hover:bg-cream hover:text-primary transition-colors text-sm flex items-center">
                            <i class="fas fa-route mr-3 text-primary"></i>Morocco Tours
                        </a></li>
                        <li><a href="/excursions" class="block px-6 py-2 hover:bg-cream hover:text-primary transition-colors text-sm flex items-center">
                            <i class="fas fa-hiking mr-3 text-primary"></i>Day Excursions
                        </a></li>
                        <li><a href="/activities" class="block px-6 py-2 hover:bg-cream hover:text-primary transition-colors text-sm flex items-center">
                            <i class="fas fa-star mr-3 text-primary"></i>Activities
                        </a></li>
                        <li><a href="/transfers" class="block px-6 py-2 hover:bg-cream hover:text-primary transition-colors text-sm flex items-center">
                            <i class="fas fa-car-side mr-3 text-primary"></i>City Transfers
                        </a></li>
                        <li><a href="/car-rental" class="block px-6 py-2 hover:bg-cream hover:text-primary transition-colors text-sm flex items-center">
                            <i class="fas fa-car mr-3 text-primary"></i>Rent A Car
                        </a></li>
                    </ul>
                </li>
                
                <!-- Plan Dropdown -->
                <li class="relative dropdown-container">
                    <a href="#" class="py-2 flex items-center hover:text-primary transition-colors text-sm uppercase tracking-wider font-medium dropdown-toggle">
                        Plan Your Trip 
                        <i class="fas fa-chevron-down ml-1 text-xs transition-transform"></i>
                    </a>
                    <ul class="absolute left-1/2 -translate-x-1/2 mt-2 w-64 bg-white text-secondary rounded-none border-t-2 border-primary shadow-large py-2 hidden dropdown-menu">
                        <li><a href="/customize" class="block px-6 py-2 hover:bg-cream hover:text-primary transition-colors text-sm flex items-center">
                            <i class="fas fa-pencil-alt mr-3 text-primary"></i>Customize My Tour
                        </a></li>
                        <li><a href="/faqs" class="block px-6 py-2 hover:bg-cream hover:text-primary transition-colors text-sm flex items-center">
                            <i class="fas fa-question-circle mr-3 text-primary"></i>Traveler's Guide: FAQs
                        </a></li>
                    </ul>
                </li>
                
                <li><a href="/blog" class="py-2 hover:text-primary transition-colors text-sm uppercase tracking-wider font-medium">Blog</a></li>
                <li><a href="/contact" class="py-2 hover:text-primary transition-colors text-sm uppercase tracking-wider font-medium">Contact</a></li>
                
                <li class="ml-4">
                    <a href="/customize" class="btn-primary text-sm">
                        Book Now
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Mobile Menu (Hidden by default) -->
<div id="mobile-menu" class="fixed inset-0 bg-charcoal/95 backdrop-blur-md z-40 hidden pt-24 pb-6 px-6 overflow-y-auto">
    <ul class="text-white text-base space-y-1">
        <li><a href="/" class="block py-3 hover:text-primary transition-colors border-b border-white/10">Home</a></li>
        
        <li class="border-b border-white/10">
            <div class="flex justify-between items-center cursor-pointer mobile-dropdown-toggle py-3">
                <span>Explore</span>
                <i class="fas fa-chevron-down text-xs transition-transform text-primary"></i>
            </div>
            <ul class="mobile-dropdown-menu hidden pl-4 py-2 space-y-3 bg-white/5 my-2 rounded">
                <li><a href="/tours" class="block py-2 text-white/80 hover:text-primary transition-colors flex items-center">
                    <i class="fas fa-route mr-2 text-primary"></i>Morocco Tours
                </a></li>
                <li><a href="/excursions" class="block py-2 text-white/80 hover:text-primary transition-colors flex items-center">
                    <i class="fas fa-hiking mr-2 text-primary"></i>Day Excursions
                </a></li>
                <li><a href="/activities" class="block py-2 text-white/80 hover:text-primary transition-colors flex items-center">
                    <i class="fas fa-star mr-2 text-primary"></i>Activities
                </a></li>
                <li><a href="/transfers" class="block py-2 text-white/80 hover:text-primary transition-colors flex items-center">
                    <i class="fas fa-car-side mr-2 text-primary"></i>City Transfers
                </a></li>
                <li><a href="/car-rental" class="block py-2 text-white/80 hover:text-primary transition-colors flex items-center">
                    <i class="fas fa-car mr-2 text-primary"></i>Rent A Car
                </a></li>
            </ul>
        </li>
        
        <li class="border-b border-white/10">
            <div class="flex justify-between items-center cursor-pointer mobile-dropdown-toggle py-3">
                <span>Plan Your Trip</span>
                <i class="fas fa-chevron-down text-xs transition-transform text-primary"></i>
            </div>
            <ul class="mobile-dropdown-menu hidden pl-4 py-2 space-y-3 bg-white/5 my-2 rounded">
                <li><a href="/customize" class="block py-2 text-white/80 hover:text-primary transition-colors flex items-center">
                    <i class="fas fa-pencil-alt mr-2 text-primary"></i>Customize My Tour
                </a></li>
                <li><a href="/faqs" class="block py-2 text-white/80 hover:text-primary transition-colors flex items-center">
                    <i class="fas fa-question-circle mr-2 text-primary"></i>Traveler's Guide: FAQs
                </a></li>
            </ul>
        </li>
        
        <li class="border-b border-white/10"><a href="/blog" class="block py-3 hover:text-primary transition-colors">Blog</a></li>
        <li class="border-b border-white/10"><a href="/contact" class="block py-3 hover:text-primary transition-colors">Contact</a></li>
        
        <li class="pt-6 mt-6">
            <a href="/customize" class="block w-full bg-primary hover:bg-primary/90 text-white py-3 px-6 text-center font-medium border border-primary/30">
                Book Your Trip Now
            </a>
        </li>
        
        <!-- Social Links -->
        <li class="pt-6 mt-6">
            <div class="flex items-center justify-center space-x-4">
                <a href="#" class="w-9 h-9 flex items-center justify-center border border-white/20 text-white hover:text-primary hover:border-primary transition-colors">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="#" class="w-9 h-9 flex items-center justify-center border border-white/20 text-white hover:text-primary hover:border-primary transition-colors">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="#" class="w-9 h-9 flex items-center justify-center border border-white/20 text-white hover:text-primary hover:border-primary transition-colors">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="#" class="w-9 h-9 flex items-center justify-center border border-white/20 text-white hover:text-primary hover:border-primary transition-colors">
                    <i class="fab fa-whatsapp"></i>
                </a>
            </div>
        </li>
    </ul>
</div>

<!-- Back to Top Button -->
<button id="back-to-top" class="fixed bottom-4 right-4 bg-primary hover:bg-primary/80 text-white rounded-none w-12 h-12 flex items-center justify-center shadow-md transition-all duration-300 opacity-0 translate-y-10 z-50">
    <i class="fas fa-chevron-up"></i>
</button>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const navbar = document.querySelector('nav');
        const backToTopBtn = document.getElementById('back-to-top');
        const mobileToggle = document.getElementById('mobile-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileDropdownToggles = document.querySelectorAll('.mobile-dropdown-toggle');
        const desktopDropdownToggles = document.querySelectorAll('.dropdown-toggle');
        let lastScrollTop = 0;
        
        // Add a class to nav if not at top on load
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        }
        
        // Handle navbar show/hide on scroll
        window.addEventListener('scroll', function() {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            // Add/remove scrolled class
            if (scrollTop > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
            
            // Determine scroll direction
            if (scrollTop > lastScrollTop && scrollTop > 100) {
                // Scrolling down & not at the top
                navbar.style.transform = 'translateY(-100%)';
            } else {
                // Scrolling up or at the top
                navbar.style.transform = 'translateY(0)';
            }
            
            // Show/hide back to top button
            if (scrollTop > 300) {
                backToTopBtn.classList.remove('opacity-0', 'translate-y-10');
                backToTopBtn.classList.add('opacity-100', 'translate-y-0');
            } else {
                backToTopBtn.classList.add('opacity-0', 'translate-y-10');
                backToTopBtn.classList.remove('opacity-100', 'translate-y-0');
            }
            
            lastScrollTop = scrollTop;
        });
        
        // Back to top button click event
        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Toggle mobile menu
        mobileToggle.addEventListener('click', function() {
            this.classList.toggle('active');
            if (mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.remove('hidden');
                document.body.style.overflow = 'hidden'; // Prevent scrolling when menu is open
                
                // Animate the toggle icon to an X
                const bars = this.querySelectorAll('div');
                bars[0].classList.add('rotate-45', 'translate-y-2');
                bars[1].classList.add('opacity-0');
                bars[2].classList.add('-rotate-45', '-translate-y-2');
            } else {
                mobileMenu.classList.add('hidden');
                document.body.style.overflow = ''; // Restore scrolling
                
                // Revert animation
                const bars = this.querySelectorAll('div');
                bars[0].classList.remove('rotate-45', 'translate-y-2');
                bars[1].classList.remove('opacity-0');
                bars[2].classList.remove('-rotate-45', '-translate-y-2');
            }
        });
        
        // Handle mobile dropdown menus
        mobileDropdownToggles.forEach(toggle => {
            toggle.addEventListener('click', function() {
                const dropdownMenu = this.nextElementSibling;
                const icon = this.querySelector('i.fa-chevron-down');
                
                if (dropdownMenu.classList.contains('hidden')) {
                    dropdownMenu.classList.remove('hidden');
                    icon.classList.add('rotate-180');
                } else {
                    dropdownMenu.classList.add('hidden');
                    icon.classList.remove('rotate-180');
                }
            });
        });
        
        // Handle desktop dropdown menus - click instead of hover
        desktopDropdownToggles.forEach(toggle => {
            toggle.addEventListener('click', function(e) {
                e.preventDefault();
                
                const parent = this.parentElement;
                const dropdownMenu = parent.querySelector('.dropdown-menu');
                const icon = this.querySelector('i.fa-chevron-down');
                
                // Close all other dropdowns
                document.querySelectorAll('.dropdown-menu').forEach(menu => {
                    if (menu !== dropdownMenu && !menu.classList.contains('hidden')) {
                        menu.classList.add('hidden');
                        const parentToggle = menu.parentElement.querySelector('.dropdown-toggle i');
                        if (parentToggle) {
                            parentToggle.classList.remove('rotate-180');
                        }
                    }
                });
                
                // Toggle current dropdown
                if (dropdownMenu.classList.contains('hidden')) {
                    dropdownMenu.classList.remove('hidden');
                    icon.classList.add('rotate-180');
                } else {
                    dropdownMenu.classList.add('hidden');
                    icon.classList.remove('rotate-180');
                }
            });
        });
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.dropdown-container')) {
                document.querySelectorAll('.dropdown-menu').forEach(menu => {
                    menu.classList.add('hidden');
                    const parentToggle = menu.parentElement.querySelector('.dropdown-toggle i');
                    if (parentToggle) {
                        parentToggle.classList.remove('rotate-180');
                    }
                });
            }
        });
        
        // Close mobile menu on window resize if screen gets larger
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768 && !mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
                document.body.style.overflow = ''; // Restore scrolling
                
                // Revert animation on toggle icon
                const bars = mobileToggle.querySelectorAll('div');
                bars[0].classList.remove('rotate-45', 'translate-y-2');
                bars[1].classList.remove('opacity-0');
                bars[2].classList.remove('-rotate-45', '-translate-y-2');
            }
        });
    });
</script> 