<%- include('../../partials/head') %>
<%- include('../../partials/navbar') %>

<div class="blog-container">
    <!-- Hero Section with Enhanced Style -->
    <section class="blog-hero relative bg-primary pt-[60px]" style="background-image: url('/images/morocco-landscape.jpg'); background-size: cover; background-position: center; height: 300px;">
        <div class="absolute inset-0 bg-black bg-opacity-60"></div>
        <div class="container mx-auto px-6 py-10 relative z-10 text-center">
            <h1 class="font-playfair font-bold mb-4 text-white" style="font-size: 28px; letter-spacing: -0.5px;"><%= heroTitle %></h1>
            <p class="font-light max-w-4xl mx-auto text-white" style="font-size: 16px; line-height: 1.5;"><%= heroSubtitle %></p>
        </div>
    </section>

    <div class="container mx-auto px-6 py-16">
        <div class="flex flex-wrap -mx-6">
            <!-- Main Content -->
            <div class="w-full lg:w-2/3 px-6" data-aos="fade-up" data-aos-delay="100">
                <!-- Featured Posts Section -->
                <% if (featuredPosts && featuredPosts.length > 0) { %>
                    <section class="mb-20">
                        <h2 class="font-playfair mb-8 pb-3 section-heading" style="border-bottom: 2px solid #f1f1f1;">Featured Posts</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                            <% featuredPosts.forEach((post, index) => { %>
                                <% if (index === 0) { %>
                                    <!-- Main Featured Post -->
                                    <div class="col-span-1 md:col-span-2 clean-card overflow-hidden" style="box-shadow: 0 15px 30px rgba(0,0,0,0.08);">
                                        <div class="h-96 overflow-hidden">
                                            <img src="<%= post.image %>" alt="<%= post.title %>" class="w-full h-full object-cover hover:scale-105 transition-transform duration-700" style="object-position: center;">
                                        </div>
                                        <div class="p-10" style="background: white;">
                                            <div class="flex items-center text-gray-500 mb-4 meta-text" style="font-size: 13px;">
                                                <span><i class="far fa-calendar-alt mr-2"></i><%= post.formattedDate %></span>
                                                <span class="mx-3">•</span>
                                                <span><i class="far fa-clock mr-2"></i><%= post.readingTime %> min read</span>
                                            </div>
                                            <h3 class="font-playfair font-bold mb-4" style="font-size: 22px; line-height: 1.3;">
                                                <a href="/blog/<%= post.slug %>" class="hover:text-primary transition-colors duration-300"><%= post.title %></a>
                                            </h3>
                                            <p class="text-gray-700 mb-6 card-text"><%= post.excerpt %></p>
                                            <div class="flex justify-between items-center">
                                                <a href="/blog/<%= post.slug %>" class="inline-flex items-center text-primary hover:text-primary-dark font-medium" style="font-size: 14px;">
                                                    Read Article 
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                                    </svg>
                                                </a>
                                                <span class="bg-blue-50 text-primary px-4 py-2" style="font-size: 13px;">
                                                    <a href="/blog/category/<%= post.category %>"><%= post.category %></a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                <% } else { %>
                                    <!-- Secondary Featured Posts -->
                                    <div class="clean-card overflow-hidden" style="box-shadow: 0 10px 20px rgba(0,0,0,0.05);">
                                        <div class="h-56 overflow-hidden">
                                            <img src="<%= post.image %>" alt="<%= post.title %>" class="w-full h-full object-cover hover:scale-105 transition-transform duration-700">
                                        </div>
                                        <div class="p-8" style="background: white;">
                                            <div class="flex items-center text-gray-500 mb-3 meta-text">
                                                <span><i class="far fa-calendar-alt mr-2"></i><%= post.formattedDate %></span>
                                                <span class="mx-3">•</span>
                                                <span><i class="far fa-clock mr-2"></i><%= post.readingTime %> min read</span>
                                            </div>
                                            <h3 class="font-playfair font-bold mb-3 card-title">
                                                <a href="/blog/<%= post.slug %>" class="hover:text-primary transition-colors duration-300"><%= post.title %></a>
                                            </h3>
                                            <p class="text-gray-700 mb-5 line-clamp-2 card-text"><%= post.excerpt %></p>
                                            <div class="flex justify-between items-center">
                                                <a href="/blog/<%= post.slug %>" class="inline-flex items-center text-primary hover:text-primary-dark font-medium" style="font-size: 14px;">
                                                    Read Article
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                                    </svg>
                                                </a>
                                                <span class="bg-blue-50 text-primary px-3 py-1" style="font-size: 12px;">
                                                    <a href="/blog/category/<%= post.category %>"><%= post.category %></a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                <% } %>
                            <% }); %>
                        </div>
                    </section>
                <% } %>

                <!-- Recent Posts Section -->
                <section class="mb-20" data-aos="fade-up" data-aos-delay="200">
                    <div class="flex justify-between items-center mb-8 pb-3" style="border-bottom: 2px solid #f1f1f1;">
                        <h2 class="font-playfair section-heading">Recent Posts</h2>
                        <a href="/blog/posts" class="text-primary hover:text-primary-dark font-medium" style="font-size: 14px;">
                            View All Posts
                            <i class="fas fa-arrow-right ml-2"></i>
                        </a>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <% if (recentPosts && recentPosts.length > 0) { %>
                            <% recentPosts.forEach(post => { %>
                                <div class="clean-card overflow-hidden" style="box-shadow: 0 10px 20px rgba(0,0,0,0.05);">
                                    <div class="h-56 overflow-hidden">
                                        <img src="<%= post.image %>" alt="<%= post.title %>" class="w-full h-full object-cover hover:scale-105 transition-transform duration-700">
                                    </div>
                                    <div class="p-8" style="background: white;">
                                        <div class="flex items-center text-gray-500 mb-3 meta-text">
                                            <span><i class="far fa-calendar-alt mr-2"></i><%= post.formattedDate %></span>
                                            <span class="mx-3">•</span>
                                            <span><i class="far fa-clock mr-2"></i><%= post.readingTime %> min read</span>
                                        </div>
                                        <h3 class="font-playfair font-bold mb-3 card-title">
                                            <a href="/blog/<%= post.slug %>" class="hover:text-primary transition-colors duration-300"><%= post.title %></a>
                                        </h3>
                                        <p class="text-gray-700 mb-5 line-clamp-2 card-text"><%= post.excerpt %></p>
                                        <div class="flex justify-between items-center">
                                            <a href="/blog/<%= post.slug %>" class="inline-flex items-center text-primary hover:text-primary-dark font-medium" style="font-size: 14px;">
                                                Read Article
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                                </svg>
                                            </a>
                                            <span class="bg-blue-50 text-primary px-3 py-1" style="font-size: 12px;">
                                                <a href="/blog/category/<%= post.category %>"><%= post.category %></a>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            <% }); %>
                        <% } else { %>
                            <div class="col-span-2 text-center py-16 bg-white" style="font-size: 14px;">
                                <i class="far fa-newspaper text-5xl text-gray-300 mb-4"></i>
                                <p class="text-gray-500">No blog posts available yet. Check back soon!</p>
                            </div>
                        <% } %>
                    </div>
                </section>
            </div>

            <!-- Sidebar with Enhanced Style -->
            <div class="w-full lg:w-1/3 px-6" data-aos="fade-up" data-aos-delay="300">
                <div style="position: sticky; top: 2rem;">
                    <%- include('../../partials/blog/sidebar', { categories, tags }) %>
                </div>
            </div>
        </div>
    </div>
</div>

<%- include('../../partials/footer') %> 